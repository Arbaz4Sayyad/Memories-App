{"ast":null,"code":"var _jsxFileName = \"E:\\\\Memories_Project\\\\client\\\\src\\\\components\\\\Auth\\\\Auth.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport jwt_decode from \"jwt-decode\";\nimport { useDispatch } from \"react-redux\";\nimport { useHistory } from \"react-router-dom\";\nimport { signin, signup } from \"../../actions/auth\";\nimport { Avatar, Button, Paper, Grid, Typography, Container } from \"@material-ui/core\";\nimport LockOutlinedIcon from \"@material-ui/icons/LockOutlined\";\nimport Input from \"./Input\";\nimport useStyles from \"./styles\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst initialState = {\n  firstName: \"\",\n  lastName: \"\",\n  email: \"\",\n  password: \"\",\n  confirmPassword: \"\"\n};\n\nconst Auth = () => {\n  _s();\n\n  const classes = useStyles();\n  const [showPassword, setShowPassword] = useState(false);\n  const [isSignup, setIsSignup] = useState(false);\n  const [formData, setFormData] = useState(initialState);\n  const dispatch = useDispatch();\n  const history = useHistory();\n\n  const handleShowPassword = () => setShowPassword(prevShowPassword => !prevShowPassword);\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    console.log(formData);\n\n    if (isSignup) {\n      dispatch(signup(formData, history));\n    } else {\n      dispatch(signin(formData, history));\n    }\n  };\n\n  const handleChange = e => {\n    setFormData({ ...formData,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  const switchMode = () => {\n    setIsSignup(prevIsSignup => !prevIsSignup);\n    setShowPassword(false);\n  };\n\n  const googleSuccess = async res => {\n    const token = res === null || res === void 0 ? void 0 : res.credential;\n    const decoded = jwt_decode(res === null || res === void 0 ? void 0 : res.credential); // console.log(result); // ? -> helps in not giving error if the obj does not exist\n\n    const {\n      email,\n      family_name,\n      given_name,\n      name,\n      sub: googleId,\n      picture\n    } = decoded;\n    const result = {\n      email,\n      family_name,\n      given_name,\n      name,\n      googleId,\n      picture\n    };\n\n    try {\n      dispatch({\n        type: \"AUTH\",\n        data: {\n          result,\n          token\n        }\n      });\n      history.push(\"/posts\");\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  useEffect(() => {\n    // global google\n    google.accounts.id.initialize({\n      client_id: process.env.REACT_APP_GOOGLE_CLIENT_ID,\n      callback: googleSuccess\n    });\n    google.accounts.id.renderButton(document.getElementById(\"googleSignIn\"), {\n      theme: \"\",\n      size: \"large\"\n    });\n  }, []);\n  return /*#__PURE__*/_jsxDEV(Container, {\n    component: \"main\",\n    maxWidth: \"xs\",\n    children: /*#__PURE__*/_jsxDEV(Paper, {\n      className: classes.paper,\n      elevation: 3,\n      children: [/*#__PURE__*/_jsxDEV(Avatar, {\n        className: classes.avatar,\n        children: /*#__PURE__*/_jsxDEV(LockOutlinedIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h5\",\n        children: isSignup ? \"Sign Up\" : \"Sign In\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        className: classes.form,\n        onSubmit: handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(Grid, {\n          container: true,\n          spacing: 2,\n          children: [isSignup && /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(Input, {\n              name: \"firstName\",\n              label: \"First Name\",\n              handleChange: handleChange,\n              autoFocus: true,\n              half: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 90,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Input, {\n              name: \"lastName\",\n              label: \"Last Name\",\n              handleChange: handleChange,\n              half: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 91,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true), /*#__PURE__*/_jsxDEV(Input, {\n            name: \"email\",\n            label: \"Email Address\",\n            handleChange: handleChange,\n            type: \"email\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            name: \"password\",\n            label: \"Password\",\n            handleChange: handleChange,\n            type: showPassword ? \"text\" : \"password\",\n            handleShowPassword: handleShowPassword\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 13\n          }, this), isSignup && /*#__PURE__*/_jsxDEV(Input, {\n            name: \"confirmPassword\",\n            label: \"Repeat Password\",\n            handleChange: handleChange,\n            type: \"password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 26\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          type: \"submit\",\n          fullWidth: true,\n          variant: \"contained\",\n          color: \"primary\",\n          className: classes.submit,\n          children: isSignup ? \"Sign Up\" : \"Sign In\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          className: classes.googleButton,\n          id: \"googleSignIn\",\n          fullWidth: true,\n          variant: \"text\",\n          children: \"Google Sign In\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          container: true,\n          justifyContent: \"flex-end\",\n          children: /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              onClick: switchMode,\n              children: isSignup ? \"Already have an account? Sign in\" : \"Don't have an account? Sign Up\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 112,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 80,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Auth, \"ixiVM40LTpGUwbQb8AvdggUKoo0=\", false, function () {\n  return [useStyles, useDispatch, useHistory];\n});\n\n_c = Auth;\nexport default Auth;\n\nvar _c;\n\n$RefreshReg$(_c, \"Auth\");","map":{"version":3,"names":["React","useState","useEffect","jwt_decode","useDispatch","useHistory","signin","signup","Avatar","Button","Paper","Grid","Typography","Container","LockOutlinedIcon","Input","useStyles","initialState","firstName","lastName","email","password","confirmPassword","Auth","classes","showPassword","setShowPassword","isSignup","setIsSignup","formData","setFormData","dispatch","history","handleShowPassword","prevShowPassword","handleSubmit","e","preventDefault","console","log","handleChange","target","name","value","switchMode","prevIsSignup","googleSuccess","res","token","credential","decoded","family_name","given_name","sub","googleId","picture","result","type","data","push","error","google","accounts","id","initialize","client_id","process","env","REACT_APP_GOOGLE_CLIENT_ID","callback","renderButton","document","getElementById","theme","size","paper","avatar","form","submit","googleButton"],"sources":["E:/Memories_Project/client/src/components/Auth/Auth.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport jwt_decode from \"jwt-decode\";\nimport { useDispatch } from \"react-redux\";\nimport { useHistory } from \"react-router-dom\";\n\nimport { signin, signup } from \"../../actions/auth\";\nimport { Avatar, Button, Paper, Grid, Typography, Container } from \"@material-ui/core\";\nimport LockOutlinedIcon from \"@material-ui/icons/LockOutlined\";\n\nimport Input from \"./Input\";\nimport useStyles from \"./styles\";\n\nconst initialState = {\n  firstName: \"\",\n  lastName: \"\",\n  email: \"\",\n  password: \"\",\n  confirmPassword: \"\",\n};\n\nconst Auth = () => {\n  const classes = useStyles();\n  const [showPassword, setShowPassword] = useState(false);\n  const [isSignup, setIsSignup] = useState(false);\n  const [formData, setFormData] = useState(initialState);\n  const dispatch = useDispatch();\n  const history = useHistory();\n\n  const handleShowPassword = () => setShowPassword((prevShowPassword) => !prevShowPassword);\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    console.log(formData);\n\n    if (isSignup) {\n      dispatch(signup(formData, history));\n    } else {\n      dispatch(signin(formData, history));\n    }\n  };\n\n  const handleChange = (e) => {\n    setFormData({ ...formData, [e.target.name]: e.target.value });\n  };\n\n  const switchMode = () => {\n    setIsSignup((prevIsSignup) => !prevIsSignup);\n    setShowPassword(false);\n  };\n\n  const googleSuccess = async (res) => {\n    const token = res?.credential;\n    const decoded = jwt_decode(res?.credential);\n    // console.log(result); // ? -> helps in not giving error if the obj does not exist\n    const { email, family_name, given_name, name, sub: googleId, picture } = decoded;\n    const result = { email, family_name, given_name, name, googleId, picture };\n\n    try {\n      dispatch({ type: \"AUTH\", data: { result, token } });\n      history.push(\"/posts\");\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  useEffect(() => {\n    // global google\n    google.accounts.id.initialize({\n      client_id: process.env.REACT_APP_GOOGLE_CLIENT_ID,\n      callback: googleSuccess,\n    });\n\n    google.accounts.id.renderButton(document.getElementById(\"googleSignIn\"), {\n      theme: \"\",\n      size: \"large\",\n    });\n  }, []);\n\n  return (\n    <Container component=\"main\" maxWidth=\"xs\">\n      <Paper className={classes.paper} elevation={3}>\n        <Avatar className={classes.avatar}>\n          <LockOutlinedIcon />\n        </Avatar>\n        <Typography variant=\"h5\">{isSignup ? \"Sign Up\" : \"Sign In\"}</Typography>\n        <form className={classes.form} onSubmit={handleSubmit}>\n          <Grid container spacing={2}>\n            {isSignup && (\n              <>\n                <Input name=\"firstName\" label=\"First Name\" handleChange={handleChange} autoFocus half />\n                <Input name=\"lastName\" label=\"Last Name\" handleChange={handleChange} half />\n              </>\n            )}\n            <Input name=\"email\" label=\"Email Address\" handleChange={handleChange} type=\"email\" />\n            <Input\n              name=\"password\"\n              label=\"Password\"\n              handleChange={handleChange}\n              type={showPassword ? \"text\" : \"password\"}\n              handleShowPassword={handleShowPassword}\n            />\n            {isSignup && <Input name=\"confirmPassword\" label=\"Repeat Password\" handleChange={handleChange} type=\"password\" />}\n          </Grid>\n          <Button type=\"submit\" fullWidth variant=\"contained\" color=\"primary\" className={classes.submit}>\n            {isSignup ? \"Sign Up\" : \"Sign In\"}\n          </Button>\n          <Button className={classes.googleButton} id=\"googleSignIn\" fullWidth variant=\"text\">\n            Google Sign In\n          </Button>\n          <Grid container justifyContent=\"flex-end\">\n            <Grid item>\n              <Button onClick={switchMode}>{isSignup ? \"Already have an account? Sign in\" : \"Don't have an account? Sign Up\"}</Button>\n            </Grid>\n          </Grid>\n        </form>\n      </Paper>\n    </Container>\n  );\n};\n\nexport default Auth;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}